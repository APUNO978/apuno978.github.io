<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>USA 2025 Adventure</title>
  <style>
    /* ========== Base / Reset ========== */
    *{margin:0;padding:0;box-sizing:border-box}
    :root{
      --primary:#007AFF;--secondary:#5856D6;--success:#34C759;--warning:#FF9500;--danger:#FF3B30;
      --ink:#11131a;--muted:#5c6270;--panel:#ffffff;--panel-ghost:rgba(255,255,255,.7);
      --border:rgba(16,24,40,.08);--radius:20px;--shadow:0 10px 30px rgba(16,24,40,.06);
      --glass:rgba(255,255,255,.7);--glass-dark:rgba(17,19,26,.35);
      --curve:cubic-bezier(.4,0,.2,1)
    }
    html,body{height:100%}
    body{
      font-family:-apple-system,BlinkMacSystemFont,"SF Pro Text","Helvetica Neue",Arial,sans-serif;
      color:var(--ink);
      background:
        radial-gradient(900px 220px at -10% -10%, rgba(0,0,0,.04), transparent),
        radial-gradient(1100px 260px at 110% -10%, rgba(0,0,0,.04), transparent),
        radial-gradient(1200px 200px at 50% 105%, rgba(0,0,0,.03), transparent),
        #f6f7fb;
    }

    /* ========== Navigation ========== */
    nav{
      position:sticky;top:0;z-index:50;background:rgba(255,255,255,.75);
      backdrop-filter: blur(14px); -webkit-backdrop-filter: blur(14px);
      border-bottom:1px solid var(--border)
    }
    .nav-container{max-width:1200px;margin:0 auto;padding:16px 24px;display:flex;align-items:center;justify-content:space-between;gap:16px;position:relative}
    .logo{font-weight:800;letter-spacing:.2px;background:linear-gradient(135deg,var(--primary),var(--secondary));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .nav-links{display:flex;gap:16px;list-style:none}
    .nav-link{padding:8px 12px;border-radius:10px;cursor:pointer;color:var(--ink);font-weight:600;font-size:14px;border:1px solid transparent;transition:all 0.2s var(--curve)}
    .nav-link:hover{background:rgba(0,0,0,.04);transform:translateY(-1px)}
    .nav-link.active{background:var(--primary);color:#fff;border-color:transparent}

    .nav-toggle{
      display:none;width:40px;height:40px;border-radius:12px;border:1px solid var(--border);
      background:#fff;box-shadow:var(--shadow);align-items:center;justify-content:center;font-size:20px;cursor:pointer;
    }
    @media (max-width: 768px){
      .nav-toggle{display:flex}
      .nav-links{
        display:none;position:absolute;top:calc(100% + 8px);left:16px;right:16px;
        background:#fff;border:1px solid var(--border);border-radius:14px;padding:8px;box-shadow:var(--shadow)
      }
      nav.open .nav-links{display:grid;grid-template-columns:1fr;gap:6px}
      .nav-link{display:block;width:100%;padding:12px 14px;font-size:15px;border-radius:10px}
      .nav-link.active{background:#eef3ff;color:var(--primary)}
    }

    /* ========== Enhanced Hero with Pulse Animation ========== */
    .hero{padding:64px 24px 24px;text-align:center;position:relative;overflow:hidden}
    .hero::before{
      content:'';position:absolute;top:0;left:50%;transform:translateX(-50%);
      width:600px;height:600px;background:radial-gradient(circle,rgba(0,122,255,.08),transparent 70%);
      animation:pulse 4s ease-in-out infinite;pointer-events:none;
    }
    @keyframes pulse{0%,100%{transform:translateX(-50%) scale(1);opacity:.3} 50%{transform:translateX(-50%) scale(1.1);opacity:.1}}
    
    .hero-title{font-size:56px;line-height:1.05;letter-spacing:-1.2px;margin-bottom:12px;background:linear-gradient(135deg,#2b2d42,#4a4e69);-webkit-background-clip:text;-webkit-text-fill-color:transparent;position:relative;z-index:1}
    .hero-subtitle{font-size:18px;color:var(--muted);position:relative;z-index:1}
    
    /* ========== Enhanced Countdown ========== */
    .countdown{display:flex;justify-content:center;gap:16px;margin-top:24px;flex-wrap:wrap;position:relative;z-index:1}
    .countdown-item{
      background:#fff;border:1px solid var(--border);border-radius:14px;padding:16px 18px;min-width:86px;
      box-shadow:var(--shadow);transition:transform 0.3s var(--curve);position:relative;overflow:hidden;
    }
    .countdown-item:hover{transform:translateY(-2px) scale(1.02)}
    .countdown-item::before{
      content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;
      background:linear-gradient(90deg,transparent,rgba(255,255,255,.6),transparent);
      transition:left 0.5s ease;
    }
    .countdown-item.tick::before{left:100%}
    .countdown-value{
      font-size:32px;font-weight:800;
      background:linear-gradient(135deg,var(--primary),var(--secondary));
      -webkit-background-clip:text;-webkit-text-fill-color:transparent;
      transition:transform 0.2s var(--curve);
    }
    .countdown-item.tick .countdown-value{transform:scale(1.1)}
    .countdown-label{font-size:12px;color:var(--muted);text-transform:uppercase;letter-spacing:.08em;margin-top:4px}

    /* ========== Layout Container ========== */
    .container{max-width:1200px;margin:0 auto;padding:0 24px 80px}

    /* ========== Stats ========== */
    .stats-dashboard{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:16px;margin:28px 0}
    .stat-card{
      background:#fff;border:1px solid var(--border);border-radius:14px;padding:18px;text-align:center;
      box-shadow:var(--shadow);transition:transform 0.2s var(--curve);cursor:pointer;
    }
    .stat-card:hover{transform:translateY(-3px)}
    .stat-icon{font-size:24px;margin-bottom:6px}
    .stat-value{font-size:28px;font-weight:800;background:linear-gradient(135deg,var(--primary),var(--secondary));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .stat-label{font-size:12px;color:var(--muted)}

    /* ========== Budget ========== */
    .budget-card{background:#fff;border:1px solid var(--border);border-radius:var(--radius);padding:24px;box-shadow:var(--shadow);margin-bottom:40px}
    .budget-header{display:flex;align-items:center;justify-content:space-between;gap:16px;flex-wrap:wrap}
    .budget-title{font-size:22px;font-weight:800}
    .budget-total{font-size:28px;font-weight:900;background:linear-gradient(135deg,var(--success),#2ecc71);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .budget-items{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px;margin-top:16px}
    .budget-item{background:#fafbff;border:1px solid var(--border);border-radius:12px;padding:14px}
    .budget-item-label{font-size:12px;color:var(--muted);margin-bottom:6px}
    .budget-item-value{font-size:18px;font-weight:800}
    .budget-progress{margin-top:18px}
    .progress-bar{width:100%;height:8px;background:#eef1f6;border-radius:999px;overflow:hidden}
    .progress-fill{height:100%;background:linear-gradient(90deg,var(--success),#4ade80);width:0%;transition:width 0.6s var(--curve)}
    .progress-label{font-size:12px;color:var(--muted);text-align:center;margin-top:8px}

    /* ========== Enhanced Live Weather ========== */
    .weather-section{margin:40px 0}
    .section-title{font-size:28px;font-weight:900;margin-bottom:14px}
    .weather-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px}
    .weather-card{
      background:linear-gradient(135deg,rgba(255,255,255,.95),rgba(255,255,255,.8));
      border:1px solid var(--border);border-radius:20px;padding:20px;text-align:center;
      box-shadow:var(--shadow);backdrop-filter:blur(10px);
      transition:all 0.3s var(--curve);position:relative;overflow:hidden;
      cursor:pointer;
    }
    .weather-card::before{
      content:'';position:absolute;top:0;left:0;right:0;height:4px;
      background:linear-gradient(90deg,var(--primary),var(--secondary));
      transform:scaleX(0);transition:transform 0.3s var(--curve);
    }
    .weather-card:hover{transform:translateY(-4px);box-shadow:0 20px 40px rgba(16,24,40,.1)}
    .weather-card:hover::before{transform:scaleX(1)}
    .weather-card.loading{opacity:0.7}
    .weather-card.error{border-color:var(--danger);background:linear-gradient(135deg,rgba(255,59,48,.05),rgba(255,255,255,.9))}
    
    .weather-location{font-weight:800;color:var(--primary);margin-bottom:8px;font-size:16px}
    .weather-temp{font-size:32px;font-weight:900;margin-bottom:8px;background:linear-gradient(135deg,var(--ink),var(--muted));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .weather-icon{font-size:48px;margin:12px 0;filter:drop-shadow(0 2px 4px rgba(0,0,0,.1))}
    .weather-desc{font-size:14px;color:var(--muted);margin-bottom:10px;font-weight:500}
    .weather-details{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:12px}
    .weather-detail{background:rgba(255,255,255,.6);border-radius:8px;padding:8px 6px;border:1px solid rgba(0,0,0,.05)}
    .weather-detail-label{font-size:10px;color:var(--muted);text-transform:uppercase;letter-spacing:.5px}
    .weather-detail-value{font-weight:700;font-size:13px;color:var(--ink)}
    .weather-update{font-size:11px;color:var(--muted);margin-top:8px;opacity:0.8}

    /* ========== Birthday Widget ========== */
    .birthday-wrap{display:flex;justify-content:center;margin:38px 0}
    .birthday{width:100%;max-width:880px;background:conic-gradient(from 220deg at 90% -10%, rgba(255,215,0,.2), transparent 40%) #fff;border:1px solid var(--border);border-radius:24px;box-shadow:var(--shadow);overflow:hidden;position:relative}
    .birthday-inner{display:grid;grid-template-columns:1fr 320px;gap:16px;padding:22px}
    .birthday-left{padding-right:8px}
    .b-eyebrow{font-size:12px;letter-spacing:.12em;text-transform:uppercase;color:var(--muted);margin-bottom:6px}
    .b-title{font-size:28px;line-height:1.1;margin-bottom:8px}
    .b-sub{font-size:14px;color:var(--muted)}
    .b-cta{margin-top:14px}
    .b-btn{appearance:none;border:0;background:linear-gradient(135deg,#ff8a00,#ff3b30);color:#fff;font-weight:800;padding:12px 16px;border-radius:14px;cursor:pointer;transition:transform .12s var(--curve), box-shadow .2s var(--curve);box-shadow:0 6px 16px rgba(255,59,48,.25)}
    .b-btn:hover{transform:translateY(-1px)}
    .birthday-right{display:grid;place-items:center;background:
      radial-gradient(120px 80px at 70% 15%, rgba(255,59,48,.08), transparent),
      radial-gradient(180px 120px at 30% 85%, rgba(88,86,214,.08), transparent)}
    .cake{font-size:86px;filter:drop-shadow(0 6px 10px rgba(0,0,0,.1))}
    #confettiCanvas{position:absolute;inset:0;pointer-events:none}
    @media (min-width: 1024px){
      .birthday-inner{grid-template-columns:1.1fr .9fr;padding:26px 28px}
    }
    @media (max-width: 720px){
      .birthday-inner{grid-template-columns:1fr;gap:10px}
      .cake{font-size:96px}
      .b-title{font-size:26px}
      .birthday{border-radius:20px}
    }

    /* ========== Destinations ========== */
    .locations-heading{font-size:32px;text-align:center;font-weight:900;margin:36px 0 20px}
    .locations-grid{display:grid;gap:18px}
    @media (min-width: 1024px){
      .locations-grid{grid-template-columns:repeat(2,minmax(0,1fr))}
    }
    .location-card{background:#fff;border:1px solid var(--border);border-radius:22px;overflow:hidden;box-shadow:var(--shadow);cursor:pointer;transition:transform .2s var(--curve)}
    .location-card:hover{transform:translateY(-3px)}
    .location-image{height:220px;background-size:cover;background-position:center;position:relative}
    .location-overlay{position:absolute;inset:0;background:linear-gradient(to bottom,transparent 0%, rgba(0,0,0,.65) 100%);display:flex;align-items:flex-end;padding:16px}
    .location-name{color:#fff;font-weight:900;font-size:24px;text-shadow:0 2px 8px rgba(0,0,0,.4)}
    .location-details{padding:18px}
    .location-dates{font-weight:700;color:var(--primary);margin-bottom:8px}
    .location-hotel{font-size:14px;color:var(--muted)}
    .location-activities{margin-top:10px}
    .activity-chip{display:inline-block;padding:6px 10px;border-radius:999px;background:#eef2ff;color:#3b5bdb;font-size:12px;margin:3px;transition:transform 0.2s var(--curve)}
    .activity-chip:hover{transform:scale(1.05)}
    @media (max-width: 600px){
      .location-image{height:260px}
      .location-name{font-size:26px}
    }

    /* ========== Epic Moments ========== */
    .epic-heading{font-size:32px;text-align:center;font-weight:900;margin:44px 0 18px}
    .moments-grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}
    @media (min-width:1024px){
      .moments-grid{grid-template-columns:repeat(3,minmax(0,1fr))}
    }
    .moment-card{background:#fff;border:1px solid var(--border);border-radius:20px;padding:20px;text-align:center;box-shadow:var(--shadow);transition:transform .2s var(--curve);min-height:160px;display:flex;flex-direction:column;justify-content:center}
    .moment-card:hover{transform:translateY(-4px)}
    .moment-card.adventure{border-color:rgba(52,199,89,.35);background:linear-gradient(135deg,rgba(52,199,89,.06),transparent)}
    .moment-card.party{border-color:rgba(255,59,48,.35);background:linear-gradient(135deg,rgba(255,59,48,.06),transparent)}
    .moment-card.culture{border-color:rgba(88,86,214,.35);background:linear-gradient(135deg,rgba(88,86,214,.06),transparent)}
    .moment-icon{font-size:42px;margin-bottom:10px;display:block}
    .moment-card h3{font-size:18px;margin-bottom:8px}
    .moment-card p{font-size:14px;color:var(--muted);margin-bottom:10px}
    .hype-level{display:flex;justify-content:center;gap:8px;align-items:center;font-weight:700;color:var(--primary)}
    .stars{font-size:16px}

    /* ========== Flights ========== */
    .flights-heading{font-size:32px;text-align:center;font-weight:900;margin:44px 0 16px}
    .flights{display:grid;gap:16px}
    .boarding{background:#fff;border:1px solid var(--border);border-radius:20px;box-shadow:var(--shadow);overflow:hidden;transition:transform 0.2s var(--curve)}
    .boarding:hover{transform:translateY(-2px)}
    .boarding-head{display:flex;align-items:center;justify-content:space-between;padding:16px 18px;border-bottom:1px dashed var(--border)}
    .route{font-weight:900;font-size:18px}
    .iata{background:#f0f3ff;border:1px solid rgba(0,0,0,.06);padding:6px 10px;border-radius:10px}
    .arrow{margin:0 6px;opacity:.6}
    .tag{padding:6px 10px;border-radius:999px;background:#eef1f6;font-weight:800;font-size:12px}
    .tag.green{color:#0a7a33;background:rgba(52,199,89,.18)}
    .tag.blue{color:#0b63c9;background:rgba(0,122,255,.18)}
    .boarding-body{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:10px;padding:14px 18px}
    .bp-field span{display:block;font-size:12px;color:var(--muted)}
    .bp-field strong{font-size:16px}
    .barcode{height:42px;border-top:1px dashed var(--border);background:
      repeating-linear-gradient(90deg, rgba(0,0,0,.8) 0 2px, transparent 2px 4px, rgba(0,0,0,.8) 4px 5px, transparent 5px 7px);opacity:.25}
    @media (max-width: 700px){
      .boarding-body{grid-template-columns:repeat(2,minmax(0,1fr))}
    }

    /* ========== Enhanced Packing Checklist ========== */
    .packing-section { margin: 40px 0; }
    .packing-controls{
      display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;flex-wrap:wrap;gap:12px;
    }
    .packing-controls button{
      background:var(--primary);color:#fff;border:0;padding:8px 16px;border-radius:8px;cursor:pointer;
      font-weight:600;transition:all 0.2s var(--curve);
    }
    .packing-controls button:hover{background:var(--secondary);transform:translateY(-1px)}
    .packing-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      background: #fff;
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 24px;
      box-shadow: var(--shadow);
    }
    .packing-column { 
      min-height: 200px;
      background:rgba(248,250,255,.6);
      border-radius:12px;
      border:2px dashed var(--border);
      padding:16px;
      transition:all 0.3s var(--curve);
    }
    .packing-column.drag-over{
      border-color:var(--primary);
      background:rgba(0,122,255,.08);
      transform:scale(1.02);
    }
    .packing-column h3{color:var(--primary);margin-bottom:12px;font-size:18px}
    .packing-column.packed h3{color:var(--success)}
    .packing-list { list-style: none; min-height: 100px; }
    .packing-item {
      background: linear-gradient(135deg,#fff,#fafbff);
      border: 2px solid var(--border);
      padding: 14px;
      border-radius: 12px;
      margin-bottom: 10px;
      cursor: grab;
      transition: all 0.2s var(--curve);
      display: flex;
      align-items: center;
      gap: 10px;
      position:relative;
      overflow:hidden;
    }
    .packing-item::before{
      content:'';position:absolute;left:0;top:0;bottom:0;width:4px;
      background:var(--primary);transform:scaleY(0);transition:transform 0.2s var(--curve);
    }
    .packing-item:hover{
      transform:translateY(-2px);
      box-shadow:var(--shadow);
      border-color:var(--primary);
    }
    .packing-item:hover::before{transform:scaleY(1)}
    .packing-item.dragging { 
      opacity: 0.8; 
      transform: scale(1.05) rotate(2deg); 
      z-index:1000;
      box-shadow:0 10px 25px rgba(0,0,0,.15);
    }
    .packing-item.packed{
      background:linear-gradient(135deg,rgba(52,199,89,.1),rgba(52,199,89,.05));
      border-color:rgba(52,199,89,.3);
      color:var(--success);
    }
    .packing-item.packed::before{background:var(--success);transform:scaleY(1)}
    .packing-icon{font-size:20px;min-width:24px}
    .packing-text{flex:1;font-weight:500}
    .packing-item button {
      margin-left: auto;
      background: none;
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 6px 10px;
      cursor: pointer;
      font-size: 12px;
      transition:all 0.2s var(--curve);
      opacity:0.7;
    }
    .packing-item:hover button{opacity:1}
    .packing-item button:hover { background: var(--primary); color: #fff; transform:scale(1.1); }
    .packing-item.packed button:hover { background: var(--success); }

    .packing-stats{
      display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));
      gap:12px;margin-top:16px;
    }
    .packing-stat{
      background:#f8faff;border:1px solid var(--border);border-radius:10px;
      padding:12px;text-align:center;
    }
    .packing-stat-value{font-size:20px;font-weight:800;color:var(--primary)}
    .packing-stat-label{font-size:11px;color:var(--muted);text-transform:uppercase;letter-spacing:.5px}

    @media (max-width: 600px) {
      .packing-grid { 
        padding: 16px; 
        grid-template-columns: 1fr;
      }
      .packing-item { font-size: 14px; }
    }

    /* ========== Modal ========== */
    .modal{display:none;position:fixed;inset:0;background:var(--glass-dark);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);z-index:100}
    .modal-content{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;border-radius:20px;padding:28px;max-width:820px;width:92%;max-height:80vh;overflow:auto;box-shadow:0 30px 60px rgba(0,0,0,.25)}
    .modal-close{position:absolute;top:10px;right:10px;width:40px;height:40px;border-radius:50%;border:0;background:#f3f4f7;cursor:pointer;font-size:18px;transition:all 0.2s var(--curve)}
    .modal-close:hover{background:var(--danger);color:#fff;transform:scale(1.1)}

    /* ========== Quick Links, Notes, Checklist ========== */
    .checklist-section{margin:44px 0;padding:24px;background:#fff;border:1px solid var(--border);border-radius:20px;box-shadow:var(--shadow)}
    .checklist-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:18px}
    .checklist-card{background:#fafbff;border:1px solid var(--border);padding:18px;border-radius:14px}
    .checklist h3{margin-bottom:12px;color:var(--primary)}
    .checklist{list-style:none}
    .checklist li{display:flex;align-items:center;gap:10px;margin-bottom:10px}
    .checklist input[type=checkbox]{width:18px;height:18px;accent-color:var(--primary)}
    .checklist input[type=checkbox]:checked+label{color:var(--success);text-decoration:line-through;opacity:.75}

    .quick-links{margin:40px 0}
    .links-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px}
    .link-card{display:block;text-decoration:none;color:inherit;background:#fff;border:1px solid var(--border);border-radius:18px;padding:20px;text-align:center;box-shadow:var(--shadow);transition:all 0.2s var(--curve)}
    .link-card:hover{transform:translateY(-3px);box-shadow:0 15px 30px rgba(16,24,40,.1)}
    .link-icon{font-size:34px;margin-bottom:8px}
    .link-title{font-weight:800}
    .link-desc{font-size:12px;color:var(--muted)}

    .notes-section{margin:40px 0}
    .notes-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px}
    .note-card{background:#fff;border:2px solid; border-radius:18px;padding:18px;transition:transform 0.2s var(--curve)}
    .note-card:hover{transform:translateY(-2px)}
    .note-card.warning{border-color:rgba(255,149,0,.35);background:linear-gradient(135deg,rgba(255,149,0,.06),transparent)}
    .note-card.info{border-color:rgba(0,122,255,.35);background:linear-gradient(135deg,rgba(0,122,255,.06),transparent)}
    .note-card.success{border-color:rgba(52,199,89,.35);background:linear-gradient(135deg,rgba(52,199,89,.06),transparent)}
    .note-card.primary{border-color:rgba(88,86,214,.35);background:linear-gradient(135deg,rgba(88,86,214,.06),transparent)}
    .note-icon{font-size:24px;margin-bottom:8px}

    /* ========== Enhanced Animations ========== */
    @keyframes slideInUp{
      from{transform:translateY(30px);opacity:0}
      to{transform:translateY(0);opacity:1}
    }
    @keyframes fadeIn{
      from{opacity:0}
      to{opacity:1}
    }
    @keyframes bounceIn{
      0%{transform:scale(0.3);opacity:0}
      50%{transform:scale(1.05)}
      70%{transform:scale(0.9)}
      100%{transform:scale(1);opacity:1}
    }
    
    .animate-on-scroll{
      opacity:0;
      transform:translateY(20px);
      transition:all 0.6s var(--curve);
    }
    .animate-on-scroll.visible{
      opacity:1;
      transform:translateY(0);
    }
    
    /* ========== Loading States ========== */
    .loading {
      position: relative;
      overflow: hidden;
    }
    .loading::after {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.6), transparent);
      animation: shimmer 1.5s infinite;
    }
    @keyframes shimmer {
      0% { left: -100%; }
      100% { left: 100%; }
    }
  </style>
</head>
<body>
  <nav>
    <div class="nav-container">
      <div class="logo">USA 2025 âœˆï¸</div>
      <button class="nav-toggle" aria-expanded="false" aria-label="Open menu" onclick="toggleMobileNav(this)">â˜°</button>
      <ul class="nav-links">
        <li class="nav-link active" data-target="overview" onclick="scrollToSection('overview',event)">Overview</li>
        <li class="nav-link" data-target="live-weather" onclick="scrollToSection('live-weather',event)">Weather</li>
        <li class="nav-link" data-target="destinations" onclick="scrollToSection('destinations',event)">Destinations</li>
        <li class="nav-link" data-target="timeline" onclick="scrollToSection('timeline',event)">Moments</li>
        <li class="nav-link" data-target="flights" onclick="scrollToSection('flights',event)">Flights</li>
        <li class="nav-link" data-target="packing" onclick="scrollToSection('packing',event)">Packing</li>
      </ul>
    </div>
  </nav>

  <header class="hero">
    <h1 class="hero-title">Your American Adventure</h1>
    <p class="hero-subtitle">September 19 â€“ October 3, 2025 â€¢ 15 Days</p>
    <div class="countdown">
      <div class="countdown-item"><div class="countdown-value" id="days">--</div><div class="countdown-label">Days</div></div>
      <div class="countdown-item"><div class="countdown-value" id="hours">--</div><div class="countdown-label">Hours</div></div>
      <div class="countdown-item"><div class="countdown-value" id="minutes">--</div><div class="countdown-label">Minutes</div></div>
      <div class="countdown-item"><div class="countdown-value" id="seconds">--</div><div class="countdown-label">Seconds</div></div>
    </div>
  </header>

  <main class="container">
    <!-- Quick Stats -->
    <section class="stats-dashboard animate-on-scroll" aria-label="Trip stats">
      <div class="stat-card" onclick="celebrate()"><div class="stat-icon">ğŸ—ºï¸</div><div class="stat-value">4</div><div class="stat-label">Destinations</div></div>
      <div class="stat-card" onclick="celebrate()"><div class="stat-icon">ğŸŒ…</div><div class="stat-value">15</div><div class="stat-label">Days</div></div>
      <div class="stat-card" onclick="celebrate()"><div class="stat-icon">ğŸ¨</div><div class="stat-value">4</div><div class="stat-label">Stays</div></div>
      <div class="stat-card" onclick="celebrate()"><div class="stat-icon">ğŸ“¸</div><div class="stat-value">20+</div><div class="stat-label">Activities</div></div>
    </section>

    <!-- Budget -->
    <section id="overview" class="budget-card animate-on-scroll" aria-labelledby="budget-title">
      <div class="budget-header">
        <h2 id="budget-title" class="budget-title">Trip Budget</h2>
        <div class="budget-total">Â£8,500</div>
      </div>
      <div class="budget-items">
        <div class="budget-item"><div class="budget-item-label">âœˆï¸ Travel</div><div class="budget-item-value">Â£3,200</div></div>
        <div class="budget-item"><div class="budget-item-label">ğŸ¨ Stays</div><div class="budget-item-value">Â£2,800</div></div>
        <div class="budget-item"><div class="budget-item-label">ğŸŸï¸ Activities</div><div class="budget-item-value">Â£2,500</div></div>
      </div>
      <div class="budget-progress">
        <div class="progress-bar"><div class="progress-fill" id="budgetProgress" style="width:75%"></div></div>
        <p class="progress-label">75% budget allocated â€¢ Â£8,500 total</p>
      </div>
    </section>

    <!-- Enhanced Live Weather -->
    <section class="weather-section animate-on-scroll" id="live-weather" aria-labelledby="wx-title">
      <h2 class="section-title" id="wx-title">Live Weather Dashboard</h2>
      <div class="weather-grid" id="liveWeatherGrid" aria-live="polite">
        <!-- Weather cards will be populated here -->
      </div>
      <div style="display:flex;justify-content:center;gap:12px;margin-top:16px;flex-wrap:wrap">
        <button onclick="refreshWeather()" style="background:var(--primary);color:#fff;border:0;padding:8px 16px;border-radius:8px;cursor:pointer;font-weight:600">ğŸ”„ Refresh Weather</button>
        <button onclick="toggleWeatherDetails()" style="background:var(--secondary);color:#fff;border:0;padding:8px 16px;border-radius:8px;cursor:pointer;font-weight:600">ğŸ“Š Toggle Details</button>
      </div>
      <p class="weather-update" id="wxStatus">ğŸŒ¤ï¸ Live weather updates every 2 minutes</p>
    </section>

    <!-- Birthday Widget -->
    <section class="birthday-wrap animate-on-scroll">
      <div class="birthday" id="birthdayCard" aria-labelledby="bday-title">
        <canvas id="confettiCanvas" width="0" height="0" aria-hidden="true"></canvas>
        <div class="birthday-inner">
          <div class="birthday-left">
            <p class="b-eyebrow">Vegas â€¢ Sep 28</p>
            <h3 class="b-title" id="bday-title">ğŸ‰ 30th Birthday: Let's Make It Legendary!</h3>
            <p class="b-sub">A toast, a rooftop, and a little chaos. Tap the button when the moment hitsâ€”instant celebration.</p>
            <div class="b-cta">
              <button class="b-btn" type="button" onclick="celebrate()">Celebrate! ğŸ‚</button>
            </div>
          </div>
          <div class="birthday-right"><div class="cake" aria-hidden="true">ğŸ‚</div></div>
        </div>
      </div>
    </section>

    <!-- Destinations -->
    <h2 id="destinations" class="locations-heading animate-on-scroll">Destinations</h2>
    <section class="locations-grid animate-on-scroll" aria-label="Destinations grid">
      <article class="location-card" onclick="showLocationDetails('sanfran')">
        <div class="location-image" style="background-image:linear-gradient(to bottom,transparent,rgba(0,0,0,.6)),url('https://images.unsplash.com/photo-1506905925346-21bda4d32df4?auto=format&fit=crop&w=2070&q=80')">
          <div class="location-overlay"><div class="location-name">San Francisco</div></div>
        </div>
        <div class="location-details">
          <div class="location-dates">ğŸ“… Sept 19â€“23</div>
          <div class="location-hotel">ğŸ¨ Hotel (TBC)</div>
          <div class="location-activities">
            <span class="activity-chip">Free Walking Tour</span><span class="activity-chip">Golden Gate</span>
            <span class="activity-chip">Alcatraz</span><span class="activity-chip">Fisherman's Wharf</span>
          </div>
        </div>
      </article>

      <article class="location-card" onclick="showLocationDetails('yosemite')">
        <div class="location-image" style="background-image:linear-gradient(to bottom,transparent,rgba(0,0,0,.6)),url('https://images.unsplash.com/photo-1449824913935-59a10b8d2000?auto=format&fit=crop&w=2070&q=80')">
          <div class="location-overlay"><div class="location-name">Yosemite</div></div>
        </div>
        <div class="location-details">
          <div class="location-dates">ğŸ“… Sept 23â€“26</div>
          <div class="location-hotel">ğŸ¨ Stay (TBC)</div>
          <div class="location-activities">
            <span class="activity-chip">Glacier Point</span><span class="activity-chip">Mist Trail</span>
            <span class="activity-chip">Sentinel Dome</span><span class="activity-chip">Stargazing</span>
          </div>
        </div>
      </article>

      <article class="location-card" onclick="showLocationDetails('vegas')">
        <div class="location-image" style="background-image:linear-gradient(to bottom,transparent,rgba(0,0,0,.6)),url('https://images.unsplash.com/photo-1605833556294-ea5c7a74f57d?auto=format&fit=crop&w=2070&q=80')">
          <div class="location-overlay"><div class="location-name">Las Vegas</div></div>
        </div>
        <div class="location-details">
          <div class="location-dates">ğŸ“… Sept 26 â€“ Oct 1</div>
          <div class="location-hotel">ğŸ¨ Stay (TBC)</div>
          <div class="location-activities">
            <span class="activity-chip">Grand Canyon</span><span class="activity-chip">Hoover Dam</span>
            <span class="activity-chip">MSG Sphere</span><span class="activity-chip">Cirque du Soleil</span>
          </div>
        </div>
      </article>

      <article class="location-card" onclick="showLocationDetails('nyc')">
        <div class="location-image" style="background-image:linear-gradient(to bottom,transparent,rgba(0,0,0,.6)),url('https://images.unsplash.com/photo-1496442226666-8d4d0e62e6e9?auto=format&fit=crop&w=2070&q=80')">
          <div class="location-overlay"><div class="location-name">New York City</div></div>
        </div>
        <div class="location-details">
          <div class="location-dates">ğŸ“… Oct 1â€“3</div>
          <div class="location-hotel">ğŸ¨ Stay (TBC)</div>
          <div class="location-activities">
            <span class="activity-chip">Manhattan</span><span class="activity-chip">Broadway</span><span class="activity-chip">Central Park</span>
          </div>
        </div>
      </article>
    </section>

    <!-- Epic Moments -->
    <h2 id="timeline" class="epic-heading animate-on-scroll">Epic Moments Planned ğŸ”¥</h2>
    <section class="moments-grid animate-on-scroll" aria-label="Epic moments">
      <article class="moment-card adventure">
        <span class="moment-icon">ğŸ”ï¸</span>
        <h3>Yosemite Stargazing</h3>
        <p>Late-night drive to catch the Milky Way. Big skies, bigger memories.</p>
        <div class="hype-level"><span>Hype:</span><span class="stars">â­â­â­â­â­</span></div>
      </article>
      <article class="moment-card party">
        <span class="moment-icon">ğŸ°</span>
        <h3>Vegas Boys Night</h3>
        <p>Neon lights, shows and a splash of roulette. Pure spectacle.</p>
        <div class="hype-level"><span>Hype:</span><span class="stars">â­â­â­â­â­</span></div>
      </article>
      <article class="moment-card culture">
        <span class="moment-icon">ğŸ—½</span>
        <h3>NYC Street Food Tour</h3>
        <p>Pizza slices, bagels, and everything in between. Tasty chaos.</p>
        <div class="hype-level"><span>Hype:</span><span class="stars">â­â­â­â­</span></div>
      </article>
      <article class="moment-card adventure">
        <span class="moment-icon">ğŸŒ‰</span>
        <h3>Golden Gate at Sunrise</h3>
        <p>Early mission for the iconic shots. Worth the 6am alarm.</p>
        <div class="hype-level"><span>Hype:</span><span class="stars">â­â­â­â­</span></div>
      </article>
      <article class="moment-card adventure">
        <span class="moment-icon">ğŸ›©ï¸</span>
        <h3>Grand Canyon Day Trip</h3>
        <p>Heli or roadâ€”either way, jaw on floor.</p>
        <div class="hype-level"><span>Hype:</span><span class="stars">â­â­â­â­â­</span></div>
      </article>
      <article class="moment-card culture">
        <span class="moment-icon">ğŸŒ</span>
        <h3>MSG Sphere Immersion</h3>
        <p>Mind-bending visuals in a massive orb.</p>
        <div class="hype-level"><span>Hype:</span><span class="stars">â­â­â­â­</span></div>
      </article>
      <article class="moment-card culture">
        <span class="moment-icon">ğŸ­</span>
        <h3>Broadway Night</h3>
        <p>Lights dim, curtain up, goosebumps.</p>
        <div class="hype-level"><span>Hype:</span><span class="stars">â­â­â­â­â­</span></div>
      </article>
      <article class="moment-card adventure">
        <span class="moment-icon">ğŸï¸</span>
        <h3>Hoover Dam Tour</h3>
        <p>Engineering beast + desert vistas.</p>
        <div class="hype-level"><span>Hype:</span><span class="stars">â­â­â­</span></div>
      </article>
      <article class="moment-card party">
        <span class="moment-icon">ğŸ¥‚</span>
        <h3>Rooftop Birthday Toast</h3>
        <p>Sunset cheers over Vegasâ€”hit the ğŸ‚ button when it's time.</p>
        <div class="hype-level"><span>Hype:</span><span class="stars">â­â­â­â­â­</span></div>
      </article>
    </section>

    <!-- Flights -->
    <h2 id="flights" class="flights-heading animate-on-scroll">Flight Itinerary</h2>
    <section class="flights animate-on-scroll" aria-label="Flights">
      <article class="boarding" aria-label="London to San Francisco">
        <div class="boarding-head">
          <div class="route"><span class="iata">LON</span><span class="arrow"> â†’ </span><span class="iata">SFO</span></div>
          <div class="tag green">Booked</div>
        </div>
        <div class="boarding-body">
          <div class="bp-field"><span>Terminal</span><strong>TBD</strong></div>
          <div class="bp-field"><span>Gate</span><strong>TBD</strong></div>
          <div class="bp-field"><span>Boarding</span><strong>â€”</strong></div>
          <div class="bp-field"><span>Seat</span><strong>â€”</strong></div>
        </div>
        <div class="barcode" aria-hidden="true"></div>
      </article>

      <article class="boarding" aria-label="Las Vegas to New York">
        <div class="boarding-head">
          <div class="route"><span class="iata">LAS</span><span class="arrow"> â†’ </span><span class="iata">NYC</span></div>
          <div class="tag blue">Check-in Soon</div>
        </div>
        <div class="boarding-body">
          <div class="bp-field"><span>Terminal</span><strong>TBD</strong></div>
          <div class="bp-field"><span>Gate</span><strong>TBD</strong></div>
          <div class="bp-field"><span>Boarding</span><strong>â€”</strong></div>
          <div class="bp-field"><span>Seat</span><strong>â€”</strong></div>
        </div>
        <div class="barcode" aria-hidden="true"></div>
      </article>

      <article class="boarding" aria-label="New York to London">
        <div class="boarding-head">
          <div class="route"><span class="iata">NYC</span><span class="arrow"> â†’ </span><span class="iata">LON</span></div>
          <div class="tag green">Booked</div>
        </div>
        <div class="boarding-body">
          <div class="bp-field"><span>Terminal</span><strong>TBD</strong></div>
          <div class="bp-field"><span>Gate</span><strong>TBD</strong></div>
          <div class="bp-field"><span>Boarding</span><strong>â€”</strong></div>
          <div class="bp-field"><span>Seat</span><strong>â€”</strong></div>
        </div>
        <div class="barcode" aria-hidden="true"></div>
      </article>
    </section>

    <!-- Enhanced Packing Checklist -->
    <section class="packing-section animate-on-scroll" id="packing" aria-labelledby="packing-title">
      <h2 class="section-title" id="packing-title">Interactive Packing Checklist</h2>
      <div class="packing-controls">
        <div>
          <button onclick="addCustomItem()">â• Add Item</button>
          <button onclick="resetPacking()">ğŸ”„ Reset All</button>
        </div>
        <div class="packing-stats">
          <div class="packing-stat">
            <div class="packing-stat-value" id="packedCount">0</div>
            <div class="packing-stat-label">Packed</div>
          </div>
          <div class="packing-stat">
            <div class="packing-stat-value" id="totalCount">0</div>
            <div class="packing-stat-label">Total</div>
          </div>
          <div class="packing-stat">
            <div class="packing-stat-value" id="packingPercent">0%</div>
            <div class="packing-stat-label">Complete</div>
          </div>
        </div>
      </div>
      <div class="packing-grid">
        <div class="packing-column" id="toPack" ondragover="allowDrop(event)" ondrop="drop(event, 'toPack')">
          <h3>ğŸ“¦ To Pack</h3>
          <ul class="packing-list" id="toPackList"></ul>
        </div>
        <div class="packing-column packed" id="packed" ondragover="allowDrop(event)" ondrop="drop(event, 'packed')">
          <h3>âœ… Packed & Ready</h3>
          <ul class="packing-list" id="packedList"></ul>
        </div>
      </div>
      <div class="progress-bar" style="margin-top:20px">
        <div class="progress-fill" id="packingProgress" style="width:0%"></div>
      </div>
      <p class="progress-label" id="packingProgressLabel">ğŸ§³ Ready to start packing!</p>
    </section>

    <!-- Quick Links -->
    <section class="quick-links animate-on-scroll">
      <h2 class="locations-heading" style="margin-top:40px">Quick Links & Resources</h2>
      <div class="links-grid">
        <a href="#" class="link-card" onclick="event.preventDefault(); showAlert('ğŸ—‚ï¸ Shared Folder', 'Add your shared Google Drive or Dropbox link here for easy access to all trip documents!');"><div class="link-icon">ğŸ—‚ï¸</div><div class="link-title">Shared Folder</div><div class="link-desc">Itineraries & docs</div></a>
        <a href="#" class="link-card" onclick="event.preventDefault(); showAlert('ğŸ—ºï¸ Maps List', 'Create a custom Google Maps list with all your must-visit spots and share it with the group!');"><div class="link-icon">ğŸ—ºï¸</div><div class="link-title">Maps List</div><div class="link-desc">Pins & routes</div></a>
        <a href="#" class="link-card" onclick="event.preventDefault(); showAlert('ğŸ“ Trip Notes', 'Set up a collaborative document for group planning, suggestions, and daily notes!');"><div class="link-icon">ğŸ“</div><div class="link-title">Trip Notes</div><div class="link-desc">Group planning doc</div></a>
        <a href="#" class="link-card" onclick="event.preventDefault(); showAlert('ğŸ“ Emergency Contacts', 'Keep important numbers handy: embassies, insurance, hotels, and local emergency services.');"><div class="link-icon">ğŸ“</div><div class="link-title">Emergencies</div><div class="link-desc">Key contacts</div></a>
      </div>
    </section>

    <!-- Important Notes -->
    <section class="notes-section animate-on-scroll">
      <h2 class="locations-heading" style="margin-top:24px">Important Reminders</h2>
      <div class="notes-grid">
        <div class="note-card warning"><div class="note-icon">âš ï¸</div><h3>Pre-Travel</h3><ul>
          <li>Check ESTA status</li><li>Confirm stays</li><li>Download offline maps</li><li>Notify bank of travel</li></ul></div>
        <div class="note-card info"><div class="note-icon">â„¹ï¸</div><h3>Air Travel</h3><ul>
          <li>Arrive early for international</li><li>Check baggage allowance</li><li>Download airline apps</li><li>Carry essentials in hand luggage</li></ul></div>
        <div class="note-card success"><div class="note-icon">ğŸ’°</div><h3>Money Tips</h3><ul>
          <li>Tipping 15â€“20% typical</li><li>Some cash for tips</li><li>Use contactless where possible</li><li>Enable card travel notices</li></ul></div>
        <div class="note-card primary"><div class="note-icon">ğŸ“±</div><h3>Stay Connected</h3><ul>
          <li>Check roaming</li><li>Consider eSIM</li><li>Save hotel Wi-Fi details</li><li>Share live locations when out</li></ul></div>
      </div>
    </section>
  </main>

  <!-- Modal -->
  <div id="locationModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal-content">
      <button class="modal-close" onclick="closeModal()" aria-label="Close">Ã—</button>
      <div id="modalContent"></div>
    </div>
  </div>

  <!-- Custom Alert Modal -->
  <div id="alertModal" class="modal" role="dialog" aria-modal="true">
    <div class="modal-content" style="max-width:500px">
      <button class="modal-close" onclick="closeAlert()" aria-label="Close">Ã—</button>
      <div id="alertContent"></div>
    </div>
  </div>

  <script>
    // ========== State Management ==========
    let packingItems = [
      { id: 'passport', text: 'Passport & Travel Documents', icon: 'ğŸ“„', column: 'toPack' },
      { id: 'clothes', text: 'Clothes for All Climates', icon: 'ğŸ‘•', column: 'toPack' },
      { id: 'camera', text: 'Camera for Epic Shots', icon: 'ğŸ“¸', column: 'toPack' },
      { id: 'hiking', text: 'Hiking Gear for Yosemite', icon: 'ğŸ¥¾', column: 'toPack' },
      { id: 'sunglasses', text: 'Sunglasses for Vegas', icon: 'ğŸ•¶ï¸', column: 'toPack' },
      { id: 'broadway', text: 'Broadway Show Tickets', icon: 'ğŸ­', column: 'toPack' },
      { id: 'chargers', text: 'Phone & Camera Chargers', icon: 'ğŸ”Œ', column: 'toPack' },
      { id: 'medications', text: 'Medications & First Aid', icon: 'ğŸ’Š', column: 'toPack' },
      { id: 'snacks', text: 'Travel Snacks', icon: 'ğŸª', column: 'toPack' }
    ];

    let weatherDetails = false;
    let lastWeatherUpdate = null;

    // ========== Enhanced Countdown ==========
    function updateCountdown(){
      const tripDate = new Date('2025-09-19T09:00:00-07:00'); // PST timezone
      const now = new Date();
      const diff = tripDate.getTime() - now.getTime();
      
      if(diff > 0){
        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((diff % (1000 * 60)) / 1000);
        
        const updateValue = (id, newVal) => {
          const el = document.getElementById(id);
          if(el && el.textContent !== String(newVal).padStart(2,'0')){
            el.textContent = String(newVal).padStart(2,'0');
            // Add tick animation
            el.parentElement.classList.add('tick');
            setTimeout(() => el.parentElement.classList.remove('tick'), 200);
          }
        };
        
        updateValue('days', days);
        updateValue('hours', hours);
        updateValue('minutes', minutes);
        updateValue('seconds', seconds);
      } else {
        const countdown = document.querySelector('.countdown');
        if(countdown && !countdown.querySelector('.trip-started')){
          countdown.innerHTML = '<div class="trip-started" style="background:linear-gradient(135deg,var(--success),#2ecc71);-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-size:24px;font-weight:900;padding:20px">ğŸ‰ Your Adventure Has Begun! ğŸ‰</div>';
          celebrate();
        }
      }
    }

    // ========== Enhanced Weather System ==========
    const tripLocations = [
      { id: "sanfran", name: "San Francisco", lat: 37.7749, lon: -122.4194, emoji: "ğŸŒ‰" },
      { id: "yosemite", name: "Yosemite", lat: 37.7456, lon: -119.5936, emoji: "ğŸ”ï¸" },
      { id: "vegas", name: "Las Vegas", lat: 36.1699, lon: -115.1398, emoji: "ğŸ°" },
      { id: "nyc", name: "New York", lat: 40.7128, lon: -74.0060, emoji: "ğŸ—½" }
    ];

    const weatherIcons = {
      0: "â˜€ï¸", 1: "ğŸŒ¤ï¸", 2: "â›…", 3: "â˜ï¸",
      45: "ğŸŒ«ï¸", 48: "ğŸŒ«ï¸", 51: "ğŸŒ¦ï¸", 53: "ğŸŒ§ï¸", 55: "ğŸŒ§ï¸",
      61: "ğŸŒ§ï¸", 63: "ğŸŒ§ï¸", 65: "ğŸŒ§ï¸", 66: "ğŸŒ§ï¸", 67: "ğŸŒ§ï¸",
      71: "ğŸŒ¨ï¸", 73: "ğŸŒ¨ï¸", 75: "ğŸŒ¨ï¸", 77: "ğŸŒ¨ï¸",
      80: "ğŸŒ¦ï¸", 81: "ğŸŒ§ï¸", 82: "â›ˆï¸", 85: "ğŸŒ¨ï¸", 86: "ğŸŒ¨ï¸",
      95: "â›ˆï¸", 96: "â›ˆï¸", 99: "â›ˆï¸"
    };

    const weatherDescriptions = {
      0: "Clear sky", 1: "Mainly clear", 2: "Partly cloudy", 3: "Overcast",
      45: "Fog", 48: "Depositing rime fog", 51: "Light drizzle", 53: "Moderate drizzle", 55: "Dense drizzle",
      61: "Slight rain", 63: "Moderate rain", 65: "Heavy rain", 66: "Light freezing rain", 67: "Heavy freezing rain",
      71: "Slight snow fall", 73: "Moderate snow fall", 75: "Heavy snow fall", 77: "Snow grains",
      80: "Slight rain showers", 81: "Moderate rain showers", 82: "Violent rain showers", 85: "Slight snow showers", 86: "Heavy snow showers",
      95: "Thunderstorm", 96: "Thunderstorm with slight hail", 99: "Thunderstorm with heavy hail"
    };

    async function fetchWeatherData(location) {
      try {
        const url = `https://api.open-meteo.com/v1/forecast?latitude=${location.lat}&longitude=${location.lon}&current=temperature_2m,relative_humidity_2m,weather_code,wind_speed_10m&daily=temperature_2m_max,temperature_2m_min,precipitation_sum&timezone=auto&forecast_days=1`;
        
        const response = await fetch(url);
        if (!response.ok) throw new Error(`HTTP ${response.status}`);
        
        const data = await response.json();
        return {
          location,
          current: data.current || {},
          daily: data.daily || {},
          success: true
        };
      } catch (error) {
        console.error(`Weather fetch failed for ${location.name}:`, error);
        return {
          location,
          error: error.message,
          success: false
        };
      }
    }

    function createWeatherCard(weatherData) {
      const { location, current, daily, success, error } = weatherData;
      
      if (!success) {
        return `
          <div class="weather-card error" id="weather-${location.id}">
            <div class="weather-location">${location.emoji} ${location.name}</div>
            <div class="weather-temp">--Â°</div>
            <div class="weather-icon">âš ï¸</div>
            <div class="weather-desc">Unable to load</div>
            <div class="weather-update">Error: ${error || 'Network issue'}</div>
          </div>
        `;
      }

      const temp = Math.round(current.temperature_2m || 0);
      const code = current.weather_code || 0;
      const icon = weatherIcons[code] || "ğŸŒ¡ï¸";
      const desc = weatherDescriptions[code] || "Unknown conditions";
      const humidity = current.relative_humidity_2m || 0;
      const windSpeed = Math.round((current.wind_speed_10m || 0) * 2.237); // Convert m/s to mph
      const highTemp = daily.temperature_2m_max ? Math.round(daily.temperature_2m_max[0]) : null;
      const lowTemp = daily.temperature_2m_min ? Math.round(daily.temperature_2m_min[0]) : null;
      const precipitation = daily.precipitation_sum ? daily.precipitation_sum[0] : 0;

      const detailsSection = weatherDetails ? `
        <div class="weather-details">
          <div class="weather-detail">
            <div class="weather-detail-label">Humidity</div>
            <div class="weather-detail-value">${humidity}%</div>
          </div>
          <div class="weather-detail">
            <div class="weather-detail-label">Wind</div>
            <div class="weather-detail-value">${windSpeed} mph</div>
          </div>
          <div class="weather-detail">
            <div class="weather-detail-label">High/Low</div>
            <div class="weather-detail-value">${highTemp || '--'}Â°/${lowTemp || '--'}Â°</div>
          </div>
          <div class="weather-detail">
            <div class="weather-detail-label">Rain</div>
            <div class="weather-detail-value">${precipitation.toFixed(1)}mm</div>
          </div>
        </div>
      ` : `
        <div class="weather-details">
          <div class="weather-detail">
            <div class="weather-detail-label">High/Low</div>
            <div class="weather-detail-value">${highTemp || '--'}Â°/${lowTemp || '--'}Â°</div>
          </div>
          <div class="weather-detail">
            <div class="weather-detail-label">Rain</div>
            <div class="weather-detail-value">${precipitation.toFixed(1)}mm</div>
          </div>
        </div>
      `;

      return `
        <div class="weather-card" id="weather-${location.id}" onclick="showWeatherDetails('${location.id}')">
          <div class="weather-location">${location.emoji} ${location.name}</div>
          <div class="weather-temp">${temp}Â°C</div>
          <div class="weather-icon">${icon}</div>
          <div class="weather-desc">${desc}</div>
          ${detailsSection}
        </div>
      `;
    }

    async function loadWeather() {
      const grid = document.getElementById('liveWeatherGrid');
      if (!grid) return;

      // Show loading state
      grid.innerHTML = tripLocations.map(location => `
        <div class="weather-card loading" id="weather-${location.id}">
          <div class="weather-location">${location.emoji} ${location.name}</div>
          <div class="weather-temp">--Â°</div>
          <div class="weather-icon">â³</div>
          <div class="weather-desc">Loading...</div>
        </div>
      `).join('');

      // Fetch weather for all locations
      const weatherPromises = tripLocations.map(fetchWeatherData);
      const weatherResults = await Promise.all(weatherPromises);

      // Update grid with results
      grid.innerHTML = weatherResults.map(createWeatherCard).join('');

      // Update status
      lastWeatherUpdate = new Date();
      const statusEl = document.getElementById('wxStatus');
      if (statusEl) {
        const time = lastWeatherUpdate.toLocaleTimeString([], {hour: '2-digit', minute: '2-digit'});
        statusEl.innerHTML = `ğŸŒ¤ï¸ Last updated: ${time} â€¢ <span onclick="refreshWeather()" style="color:var(--primary);cursor:pointer;text-decoration:underline">Refresh now</span>`;
      }
    }

    function refreshWeather() {
      loadWeather();
      // Add refresh animation
      const refreshBtn = event?.target;
      if (refreshBtn && refreshBtn.textContent.includes('ğŸ”„')) {
        refreshBtn.style.transform = 'rotate(360deg)';
        setTimeout(() => refreshBtn.style.transform = '', 600);
      }
    }

    function toggleWeatherDetails() {
      weatherDetails = !weatherDetails;
      loadWeather();
      const btn = event?.target;
      if (btn) {
        btn.textContent = weatherDetails ? 'ğŸ“Š Hide Details' : 'ğŸ“Š Show Details';
      }
    }

    function showWeatherDetails(locationId) {
      const location = tripLocations.find(l => l.id === locationId);
      if (!location) return;
      
      showAlert(`${location.emoji} ${location.name} Weather`, `
        <div style="text-align:left">
          <p><strong>Perfect for your ${location.name} adventure!</strong></p>
          <br>
          <p>ğŸ’¡ <strong>Packing Tips:</strong></p>
          <ul style="margin:10px 0;padding-left:20px">
            ${locationId === 'sanfran' ? '<li>Layers! SF weather changes quickly</li><li>Light jacket for evening fog</li>' : ''}
            ${locationId === 'yosemite' ? '<li>Sturdy hiking boots essential</li><li>Warm layers for evening stargazing</li>' : ''}
            ${locationId === 'vegas' ? '<li>Sunglasses and sunscreen</li><li>Light, breathable clothing</li>' : ''}
            ${locationId === 'nyc' ? '<li>Comfortable walking shoes</li><li>Light jacket for air conditioning</li>' : ''}
          </ul>
        </div>
      `);
    }

    // ========== Enhanced Packing System ==========
    function renderPackingItems() {
      const toPackList = document.getElementById('toPackList');
      const packedList = document.getElementById('packedList');
      
      if (!toPackList || !packedList) return;

      const toPackItems = packingItems.filter(item => item.column === 'toPack');
      const packedItems = packingItems.filter(item => item.column === 'packed');

      toPackList.innerHTML = toPackItems.map(item => `
        <li class="packing-item" draggable="true" data-id="${item.id}" ondragstart="drag(event)">
          <span class="packing-icon">${item.icon}</span>
          <span class="packing-text">${item.text}</span>
          <button onclick="moveItem('${item.id}', 'packed')" aria-label="Pack ${item.text}">âœ“</button>
        </li>
      `).join('');

      packedList.innerHTML = packedItems.map(item => `
        <li class="packing-item packed" draggable="true" data-id="${item.id}" ondragstart="drag(event)">
          <span class="packing-icon">âœ…</span>
          <span class="packing-text">${item.text}</span>
          <button onclick="moveItem('${item.id}', 'toPack')" aria-label="Unpack ${item.text}">â†º</button>
        </li>
      `).join('');

      updatePackingStats();
    }

    function updatePackingStats() {
      const packedCount = packingItems.filter(item => item.column === 'packed').length;
      const totalCount = packingItems.length;
      const percentage = totalCount > 0 ? Math.round((packedCount / totalCount) * 100) : 0;

      document.getElementById('packedCount').textContent = packedCount;
      document.getElementById('totalCount').textContent = totalCount;
      document.getElementById('packingPercent').textContent = `${percentage}%`;
      
      const progressBar = document.getElementById('packingProgress');
      const progressLabel = document.getElementById('packingProgressLabel');
      
      if (progressBar) {
        progressBar.style.width = `${percentage}%`;
      }
      
      if (progressLabel) {
        if (percentage === 0) {
          progressLabel.textContent = 'ğŸ§³ Ready to start packing!';
        } else if (percentage < 50) {
          progressLabel.textContent = `ğŸ§³ ${percentage}% packed - Keep going!`;
        } else if (percentage < 100) {
          progressLabel.textContent = `ğŸ§³ ${percentage}% packed - Almost there!`;
        } else {
          progressLabel.textContent = 'ğŸ‰ All packed and ready for adventure!';
          celebrate();
        }
      }
    }

    function moveItem(itemId, targetColumn) {
      const item = packingItems.find(i => i.id === itemId);
      if (item) {
        item.column = targetColumn;
        renderPackingItems();
        
        // Add move animation
        setTimeout(() => {
          const movedElement = document.querySelector(`[data-id="${itemId}"]`);
          if (movedElement) {
            movedElement.style.animation = 'bounceIn 0.6s var(--curve)';
            setTimeout(() => movedElement.style.animation = '', 600);
          }
        }, 50);
      }
    }

    function addCustomItem() {
      const text = prompt('What item would you like to add to your packing list?');
      if (text && text.trim()) {
        const newItem = {
          id: `custom_${Date.now()}`,
          text: text.trim(),
          icon: 'ğŸ“¦',
          column: 'toPack'
        };
        packingItems.push(newItem);
        renderPackingItems();
        showAlert('âœ… Item Added', `"${text}" has been added to your packing list!`);
      }
    }

    function resetPacking() {
      if (confirm('Are you sure you want to reset all packing progress?')) {
        packingItems.forEach(item => item.column = 'toPack');
        renderPackingItems();
        showAlert('ğŸ”„ Reset Complete', 'All items moved back to "To Pack" list.');
      }
    }

    // Drag and drop functions
    function allowDrop(e) {
      e.preventDefault();
      e.currentTarget.classList.add('drag-over');
    }

    function drag(e) {
      e.dataTransfer.setData('text', e.target.dataset.id);
      e.target.classList.add('dragging');
    }

    function drop(e, columnId) {
      e.preventDefault();
      e.currentTarget.classList.remove('drag-over');
      
      const itemId = e.dataTransfer.getData('text');
      moveItem(itemId, columnId);
      
      // Remove dragging class from all items
      document.querySelectorAll('.packing-item').forEach(item => {
        item.classList.remove('dragging');
      });
    }

    // Remove drag-over class when leaving
    document.addEventListener('dragleave', (e) => {
      if (e.target.classList.contains('packing-column')) {
        e.target.classList.remove('drag-over');
      }
    });

    // ========== Enhanced UI Functions ==========
    function celebrate() {
      burstConfetti(200);
      const celebrateBtn = document.querySelector('.b-btn');
      if (celebrateBtn) {
        celebrateBtn.style.animation = 'bounceIn 0.8s var(--curve)';
        setTimeout(() => celebrateBtn.style.animation = '', 800);
      }
    }

    function burstConfetti(count = 150) {
      const canvas = document.getElementById('confettiCanvas');
      const container = document.getElementById('birthdayCard') || document.body;
      
      if (!canvas) return;
      
      const rect = container.getBoundingClientRect();
      canvas.width = rect.width;
      canvas.height = rect.height;
      
      const ctx = canvas.getContext('2d');
      const colors = ['#FF3B30', '#FF9500', '#FFCC00', '#34C759', '#007AFF', '#5856D6', '#FF2D55'];
      
      const confetti = Array.from({length: count}, () => ({
        x: Math.random() * canvas.width,
        y: -20,
        vx: (Math.random() - 0.5) * 6,
        vy: Math.random() * 3 + 2,
        size: Math.random() * 6 + 2,
        color: colors[Math.floor(Math.random() * colors.length)],
        rotation: Math.random() * Math.PI * 2,
        rotationSpeed: (Math.random() - 0.5) * 0.3,
        gravity: 0.1
      }));

      function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        confetti.forEach((particle, index) => {
          particle.vy += particle.gravity;
          particle.x += particle.vx;
          particle.y += particle.vy;
          particle.rotation += particle.rotationSpeed;
          
          ctx.save();
          ctx.translate(particle.x, particle.y);
          ctx.rotate(particle.rotation);
          ctx.fillStyle = particle.color;
          ctx.fillRect(-particle.size/2, -particle.size/2, particle.size, particle.size);
          ctx.restore();
          
          if (particle.y > canvas.height + 20) {
            confetti.splice(index, 1);
          }
        });
        
        if (confetti.length > 0) {
          requestAnimationFrame(animate);
        }
      }
      
      animate();
    }

    function showAlert(title, message) {
      const modal = document.getElementById('alertModal');
      const content = document.getElementById('alertContent');
      
      content.innerHTML = `
        <h2 style="margin-bottom:16px;color:var(--primary)">${title}</h2>
        <div style="color:var(--ink);line-height:1.5">${message}</div>
        <button onclick="closeAlert()" style="margin-top:20px;background:var(--primary);color:#fff;border:0;padding:10px 20px;border-radius:8px;cursor:pointer;font-weight:600">Got it!</button>
      `;
      
      modal.style.display = 'block';
    }

    function closeAlert() {
      document.getElementById('alertModal').style.display = 'none';
    }

    // ========== Navigation & Scroll ==========
    function toggleMobileNav(btn) {
      const nav = document.querySelector('nav');
      const isOpen = nav.classList.toggle('open');
      if (btn) btn.setAttribute('aria-expanded', String(isOpen));
    }

    function scrollToSection(id, evt) {
      const element = document.getElementById(id);
      if (!element) return;
      
      const offset = 80;
      const elementPosition = element.getBoundingClientRect().top;
      const offsetPosition = elementPosition + window.pageYOffset - offset;
      
      window.scrollTo({
        top: offsetPosition,
        behavior: 'smooth'
      });
      
      // Update active nav
      document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
      if (evt && evt.currentTarget) {
        evt.currentTarget.classList.add('active');
      }
      
      // Close mobile nav
      if (window.innerWidth <= 768) {
        document.querySelector('nav').classList.remove('open');
        document.querySelector('.nav-toggle')?.setAttribute('aria-expanded', 'false');
      }
    }

    // ========== Modal Functions ==========
    const locationDetails = {
      sanfran: {
        title: 'San Francisco',
        dates: 'September 19â€“23, 2025',
        stay: { name: 'Hotel (TBC)' },
        activities: [
          { day: 'Day 1', activity: 'Arrival & Union Square exploration' },
          { day: 'Day 2', activity: 'Golden Gate Bridge & Fisherman\'s Wharf' },
          { day: 'Day 3', activity: 'Alcatraz tour & Free walking tour' },
          { day: 'Day 4', activity: 'Final SF sights before Yosemite' }
        ],
        highlights: ['Golden Gate Bridge', 'Alcatraz Island', 'Lombard Street', 'Pier 39'],
        tips: 'Dress in layers - SF weather can change dramatically throughout the day!'
      },
      yosemite: {
        title: 'Yosemite National Park',
        dates: 'September 23â€“26, 2025',
        stay: { name: 'Lodge/Camping (TBC)' },
        activities: [
          { day: 'Day 1', activity: 'Drive from SF, settle in' },
          { day: 'Day 2', activity: 'Glacier Point & Tunnel View' },
          { day: 'Day 3', activity: 'Hiking trails & stargazing' }
        ],
        highlights: ['Glacier Point', 'Half Dome views', 'Mist Trail', 'Milky Way photography'],
        tips: 'Bring warm clothes for evening stargazing - temperatures drop significantly!'
      },
      vegas: {
        title: 'Las Vegas',
        dates: 'September 26 â€“ October 1, 2025',
        stay: { name: 'Strip Hotel (TBC)' },
        activities: [
          { day: 'Day 1', activity: 'Arrive & explore the Strip' },
          { day: 'Day 2', activity: 'Grand Canyon day trip' },
          { day: 'Day 3', activity: '30th Birthday celebration!' },
          { day: 'Day 4', activity: 'Shows & entertainment' },
          { day: 'Day 5', activity: 'Hoover Dam & final Vegas night' }
        ],
        highlights: ['Grand Canyon helicopter tour', 'MSG Sphere experience', 'Cirque du Soleil', 'Rooftop birthday party'],
        tips: 'Stay hydrated and bring good walking shoes - the Strip is longer than it looks!'
      },
      nyc: {
        title: 'New York City',
        dates: 'October 1â€“3, 2025',
        stay: { name: 'Manhattan Hotel (TBC)' },
        activities: [
          { day: 'Day 1', activity: 'Arrival & Times Square' },
          { day: 'Day 2', activity: 'Central Park & Broadway show' },
          { day: 'Day 3', activity: 'Final sights before departure' }
        ],
        highlights: ['Broadway show', 'Central Park', 'Brooklyn Bridge', 'Food tour'],
        tips: 'Book Broadway shows in advance and wear comfortable shoes for all the walking!'
      }
    };

    function showLocationDetails(key) {
      const details = locationDetails[key];
      if (!details) return;
      
      const content = document.getElementById('modalContent');
      content.innerHTML = `
        <h2 id="modalTitle" style="font-size:28px;margin-bottom:12px;color:var(--primary)">${details.title}</h2>
        <p style="font-weight:700;margin-bottom:20px;color:var(--secondary)">${details.dates}</p>
        
        <div style="background:linear-gradient(135deg,#f8faff,#eef2ff);border:1px solid var(--border);padding:18px;border-radius:16px;margin-bottom:20px">
          <h3 style="margin-bottom:8px;color:var(--primary)">ğŸ¨ Accommodation</h3>
          <p style="font-weight:600">${details.stay.name}</p>
        </div>
        
        <div style="margin-bottom:20px">
          <h3 style="margin-bottom:12px;color:var(--primary)">ğŸ“… Daily Itinerary</h3>
          ${details.activities.map(activity => `
            <div style="padding:12px;background:#fafbff;border-radius:10px;margin-bottom:8px;border-left:4px solid var(--primary)">
              <strong style="color:var(--secondary)">${activity.day}:</strong> ${activity.activity}
            </div>
          `).join('')}
        </div>
        
        <div style="margin-bottom:20px">
          <h3 style="margin-bottom:12px;color:var(--primary)">âœ¨ Must-See Highlights</h3>
          <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:8px">
            ${details.highlights.map(highlight => `
              <span style="padding:8px 12px;background:linear-gradient(135deg,var(--primary),var(--secondary));color:#fff;border-radius:20px;text-align:center;font-weight:600;font-size:14px">${highlight}</span>
            `).join('')}
          </div>
        </div>
        
        ${details.tips ? `
          <div style="background:linear-gradient(135deg,rgba(255,149,0,.1),rgba(255,149,0,.05));border:1px solid rgba(255,149,0,.3);padding:16px;border-radius:12px">
            <strong style="color:var(--warning)">ğŸ’¡ Pro Tip:</strong> ${details.tips}
          </div>
        ` : ''}
      `;
      
      document.getElementById('locationModal').style.display = 'block';
    }

    function closeModal() {
      document.getElementById('locationModal').style.display = 'none';
    }

    // ========== Scroll Animations ==========
    function observeScrollAnimations() {
      const animateElements = document.querySelectorAll('.animate-on-scroll');
      
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
          }
        });
      }, { threshold: 0.1 });
      
      animateElements.forEach(el => observer.observe(el));
    }

    // ========== Event Listeners ==========
    document.addEventListener('DOMContentLoaded', () => {
      // Initialize countdown
      updateCountdown();
      setInterval(updateCountdown, 1000);
      
      // Initialize weather
      loadWeather();
      setInterval(loadWeather, 120000); // Update every 2 minutes
      
      // Initialize packing
      renderPackingItems();
      
      // Initialize scroll animations
      observeScrollAnimations();
      
      // Smooth scroll for navigation
      window.addEventListener('scroll', () => {
        const sections = ['overview', 'live-weather', 'destinations', 'timeline', 'flights', 'packing'];
        const scrollPos = window.pageYOffset + 100;
        
        sections.forEach(sectionId => {
          const section = document.getElementById(sectionId);
          if (!section) return;
          
          if (scrollPos >= section.offsetTop && scrollPos < section.offsetTop + section.offsetHeight) {
            document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
            const activeLink = document.querySelector(`.nav-link[data-target="${sectionId}"]`);
            if (activeLink) activeLink.classList.add('active');
          }
        });
      });
    });

    // Close modals on escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closeModal();
        closeAlert();
      }
    });

    // Close modals on outside click
    window.addEventListener('click', (e) => {
      const locationModal = document.getElementById('locationModal');
      const alertModal = document.getElementById('alertModal');
      
      if (e.target === locationModal) closeModal();
      if (e.target === alertModal) closeAlert();
    });

    // Close mobile nav on outside click
    document.addEventListener('click', (e) => {
      if (window.innerWidth > 768) return;
      
      const nav = document.querySelector('nav');
      if (nav.classList.contains('open') && !nav.contains(e.target)) {
        nav.classList.remove('open');
        document.querySelector('.nav-toggle')?.setAttribute('aria-expanded', 'false');
      }
    });
  </script>
</body>
</html>
